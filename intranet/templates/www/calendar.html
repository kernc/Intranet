{% extends "www/base-second.html" %}
{% load www i18n %}
{% load url from future %}

{% block extrahead %}{% endblock %}

{% block title %} {% trans "Calendar of Events in Kiberpipa" %} {% endblock %}

{% block heading %}
    <h1>{% trans "Calendar of Events in Kiberpipa" %}</h1>
{% endblock %}

{% block content %}
  <div class="calendar">
    <div class="koledar-img">
      <a href="{% url 'calendar_ical' %}">iCal</a> <a href="{% url 'rss' %}" ><img src="{{ settings.STATIC_URL }}www/images/rss20x20.png" alt="RSS Feeds" /></a>
    </div>
    <style type="text/css">
                    .calendar .meta .year { font-size: 48px; }
		    .calendar table th.weekday { width: 16%; }
		    .calendar table th.weekend { width: 10%; }
		    .calendar table td { height: 4em; }
		    .calendar table .num { font-size: 32px; color: #999; padding: 0.2em 0 0.5em 0; }
    </style>


    <div class="meta">
        <label class="year">{{ now|date:"Y" }}</label>
        <label class="month">{{ now|date:"F" }}</label>
            
            <small><a href="{{ prev }}"> &lt;&lt; {% trans "Previous month" %}</a></small>
      <strong>{{ now|date:"F Y"|capfirst }}</strong>
      <small><a href="{{ next }}">{% trans "Next month" %} &gt;&gt;</a></small>
    </div>

    <table class="table table-checkered table-calendar">
	<tr>
		<th class="weekday">{% trans "Monday" %}</th>
		<th class="weekday">{% trans "Tuesday" %}</th>
		<th class="weekday">{% trans "Wednesday" %}</th>
		<th class="weekday">{% trans "Thursday" %}</th>
		<th class="weekday">{% trans "Friday" %}</th>
		<th class="weekend">{% trans "Saturday" %}</th>
		<th class="weekend">{% trans "Sunday" %}</th>
	</t>
	{% for week in weeks %}
	<tr>
		{% for day, events in week %}
		<td class=" {% calclass day %}">
			<label class="num">{{ day.day }}</label>
			
			{% for event in events %}
			<div class="e">
				<strong>{{ event.start_date|date:"H:i"}}</strong>
				
				{% if event.public %}
                    <a href="{{ event.get_absolute_url }}">{{ event.title|truncchar:"32" }}</a>
                    {% for video_url in event.get_video_urls %}
                        <a href="{{ video_url }}" title="{% trans "Videos of event" %}"><img src="{{ settings.STATIC_URL }}www/images/video20x20.png" /></a>
                    {% endfor %}
                    {% if event.flickr_set_id %}
                        <a href="{{ event.get_absolute_url }}" title="{% trans "Pictures of event" %}" ><img src="{{ settings.STATIC_URL }}www/images/images16x16.png" /></a>
                    <!-- TODO: activate gallery with javascript -->
                    {% endif %}
                  {% else %}
                    {% trans "Reserved." %}
                  {% endif %}

			</div>	
			{% endfor %}
			
		</td>
		{% endfor %}
	</tr>
	{% endfor %}
	

    </table>

  </div>
{% endblock %}
